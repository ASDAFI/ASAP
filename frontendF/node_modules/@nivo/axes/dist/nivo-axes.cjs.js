"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@react-spring/web"),i=require("@nivo/core"),n=require("d3-time-format"),r=require("d3-format"),a=require("@nivo/scales"),o=require("react/jsx-runtime"),s=require("prop-types");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var f=c(e),u=l(s);function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},x.apply(this,arguments)}var d=function(e){var t,n=e.axis,r=e.scale,o=e.ticksPosition,s=e.tickValues,l=e.tickSize,c=e.tickPadding,f=e.tickRotation,u=e.engine,d=void 0===u?"svg":u,m=a.getScaleTicks(r,s),y=i.textPropsByEngine[d],g="bandwidth"in r?a.centerScale(r):r,p={lineX:0,lineY:0},k={textX:0,textY:0},h="object"==typeof document&&"rtl"===document.dir,v=y.align.center,b=y.baseline.center;return"x"===n?(t=function(e){var t;return{x:null!=(t=g(e))?t:0,y:0}},p.lineY=l*("after"===o?1:-1),k.textY=(l+c)*("after"===o?1:-1),b="after"===o?y.baseline.top:y.baseline.bottom,0===f?v=y.align.center:"after"===o&&f<0||"before"===o&&f>0?(v=y.align[h?"left":"right"],b=y.baseline.center):("after"===o&&f>0||"before"===o&&f<0)&&(v=y.align[h?"right":"left"],b=y.baseline.center)):(t=function(e){var t;return{x:0,y:null!=(t=g(e))?t:0}},p.lineX=l*("after"===o?1:-1),k.textX=(l+c)*("after"===o?1:-1),v="after"===o?y.align.left:y.align.right),{ticks:m.map((function(e){return x({key:"number"==typeof e||"string"==typeof e?e:""+e,value:e},t(e),p,k)})),textAlign:v,textBaseline:b}},m=function(e,t){if(void 0===e||"function"==typeof e)return e;if("time"===t.type){var i=n.timeFormat(e);return function(e){return i(e instanceof Date?e:new Date(e))}}return r.format(e)},y=function(e){var t,i=e.width,n=e.height,r=e.scale,o=e.axis,s=e.values,l=(t=s,Array.isArray(t)?s:void 0)||a.getScaleTicks(r,s),c="bandwidth"in r?a.centerScale(r):r,f="x"===o?l.map((function(e){var t,i;return{key:""+e,x1:null!=(t=c(e))?t:0,x2:null!=(i=c(e))?i:0,y1:0,y2:n}})):l.map((function(e){var t,n;return{key:""+e,x1:0,x2:i,y1:null!=(t=c(e))?t:0,y2:null!=(n=c(e))?n:0}}));return f},g=e.memo((function(n){var r,a=n.value,s=n.format,l=n.lineX,c=n.lineY,f=n.onClick,u=n.textBaseline,d=n.textAnchor,m=n.animatedProps,y=i.useTheme(),g=null!=(r=null==s?void 0:s(a))?r:a,p=e.useMemo((function(){var e={opacity:m.opacity};return f?{style:x({},e,{cursor:"pointer"}),onClick:function(e){return f(e,g)}}:{style:e}}),[m.opacity,f,g]);return o.jsxs(t.animated.g,x({transform:m.transform},p,{children:[o.jsx("line",{x1:0,x2:l,y1:0,y2:c,style:y.axis.ticks.line}),o.jsx(t.animated.text,{dominantBaseline:u,textAnchor:d,transform:m.textTransform,style:y.axis.ticks.text,children:g})]}))})),p=e.memo((function(n){var r=n.axis,a=n.scale,s=n.x,l=void 0===s?0:s,c=n.y,u=void 0===c?0:c,y=n.length,p=n.ticksPosition,k=n.tickValues,h=n.tickSize,v=void 0===h?5:h,b=n.tickPadding,T=void 0===b?5:b,P=n.tickRotation,j=void 0===P?0:P,S=n.format,O=n.renderTick,A=void 0===O?g:O,w=n.legend,X=n.legendPosition,Y=void 0===X?"end":X,C=n.legendOffset,q=void 0===C?0:C,B=n.onClick,W=n.ariaHidden,z=i.useTheme(),M=e.useMemo((function(){return m(S,a)}),[S,a]),R=d({axis:r,scale:a,ticksPosition:p,tickValues:k,tickSize:v,tickPadding:T,tickRotation:j}),V=R.ticks,E=R.textAlign,F=R.textBaseline,D=null;if(void 0!==w){var G,_=0,L=0,H=0;"y"===r?(H=-90,_=q,"start"===Y?(G="start",L=y):"middle"===Y?(G="middle",L=y/2):"end"===Y&&(G="end")):(L=q,"start"===Y?G="start":"middle"===Y?(G="middle",_=y/2):"end"===Y&&(G="end",_=y)),D=o.jsx("text",{transform:"translate("+_+", "+L+") rotate("+H+")",textAnchor:G,style:x({dominantBaseline:"central"},z.axis.legend.text),children:w})}var N=i.useMotionConfig(),I=N.animate,J=N.config,K=t.useSpring({transform:"translate("+l+","+u+")",lineX2:"x"===r?y:0,lineY2:"x"===r?0:y,config:J,immediate:!I}),Q=t.useTransition(V,{keys:function(e){return e.key},initial:function(e){return{opacity:1,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+j+")"}},from:function(e){return{opacity:0,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+j+")"}},enter:function(e){return{opacity:1,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+j+")"}},update:function(e){return{opacity:1,transform:"translate("+e.x+","+e.y+")",textTransform:"translate("+e.textX+","+e.textY+") rotate("+j+")"}},leave:{opacity:0},config:J,immediate:!I});return o.jsxs(t.animated.g,{transform:K.transform,"aria-hidden":W,children:[Q((function(e,t,i,n){return f.createElement(A,x({tickIndex:n,format:M,rotate:j,textBaseline:F,textAnchor:E,animatedProps:e},t,B?{onClick:B}:{}))})),o.jsx(t.animated.line,{style:z.axis.domain.line,x1:0,x2:K.lineX2,y1:0,y2:K.lineY2}),D]})})),k={ticksPosition:u.default.oneOf(["before","after"]),tickValues:u.default.oneOfType([u.default.number,u.default.arrayOf(u.default.oneOfType([u.default.number,u.default.string,u.default.instanceOf(Date)])),u.default.string]),tickSize:u.default.number,tickPadding:u.default.number,tickRotation:u.default.number,format:u.default.oneOfType([u.default.func,u.default.string]),renderTick:u.default.func,legend:u.default.node,legendPosition:u.default.oneOf(["start","middle","end"]),legendOffset:u.default.number,ariaHidden:u.default.bool},h=u.default.shape(k),v=["top","right","bottom","left"],b=e.memo((function(e){var t=e.xScale,i=e.yScale,n=e.width,r=e.height,a={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return o.jsx(o.Fragment,{children:v.map((function(e){var s=a[e];if(!s)return null;var l="top"===e||"bottom"===e,c="top"===e||"left"===e?"before":"after";return o.jsx(p,x({},s,{axis:l?"x":"y",x:"right"===e?n:0,y:"bottom"===e?r:0,scale:l?t:i,length:l?n:r,ticksPosition:c}),e)}))})})),T=e.memo((function(e){var n=e.animatedProps,r=i.useTheme();return o.jsx(t.animated.line,x({},n,r.grid.line))})),P=e.memo((function(n){var r=n.lines,a=i.useMotionConfig(),s=a.animate,l=a.config,c=t.useTransition(r,{keys:function(e){return e.key},initial:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},from:function(e){return{opacity:0,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},enter:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},update:function(e){return{opacity:1,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}},leave:{opacity:0},config:l,immediate:!s});return o.jsx("g",{children:c((function(t,i){return e.createElement(T,x({},i,{key:i.key,animatedProps:t}))}))})})),j=e.memo((function(t){var i=t.width,n=t.height,r=t.xScale,a=t.yScale,s=t.xValues,l=t.yValues,c=e.useMemo((function(){return!!r&&y({width:i,height:n,scale:r,axis:"x",values:s})}),[r,s,i,n]),f=e.useMemo((function(){return!!a&&y({width:i,height:n,scale:a,axis:"y",values:l})}),[n,i,a,l]);return o.jsxs(o.Fragment,{children:[c&&o.jsx(P,{lines:c}),f&&o.jsx(P,{lines:f})]})})),S=function(e,t){var n,r=t.axis,a=t.scale,o=t.x,s=void 0===o?0:o,l=t.y,c=void 0===l?0:l,f=t.length,u=t.ticksPosition,x=t.tickValues,m=t.tickSize,y=void 0===m?5:m,g=t.tickPadding,p=void 0===g?5:g,k=t.tickRotation,h=void 0===k?0:k,v=t.format,b=t.legend,T=t.legendPosition,P=void 0===T?"end":T,j=t.legendOffset,S=void 0===j?0:j,O=t.theme,A=d({axis:r,scale:a,ticksPosition:u,tickValues:x,tickSize:y,tickPadding:p,tickRotation:h,engine:"canvas"}),w=A.ticks,X=A.textAlign,Y=A.textBaseline;e.save(),e.translate(s,c),e.textAlign=X,e.textBaseline=Y,e.font=(O.axis.ticks.text.fontWeight?O.axis.ticks.text.fontWeight+" ":"")+O.axis.ticks.text.fontSize+"px "+O.axis.ticks.text.fontFamily,(null!=(n=O.axis.domain.line.strokeWidth)?n:0)>0&&(e.lineWidth=Number(O.axis.domain.line.strokeWidth),e.lineCap="square",O.axis.domain.line.stroke&&(e.strokeStyle=O.axis.domain.line.stroke),e.beginPath(),e.moveTo(0,0),e.lineTo("x"===r?f:0,"x"===r?0:f),e.stroke());var C="function"==typeof v?v:function(e){return""+e};if(w.forEach((function(t){var n;(null!=(n=O.axis.ticks.line.strokeWidth)?n:0)>0&&(e.lineWidth=Number(O.axis.ticks.line.strokeWidth),e.lineCap="square",O.axis.ticks.line.stroke&&(e.strokeStyle=O.axis.ticks.line.stroke),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+t.lineX,t.y+t.lineY),e.stroke());var r=C(t.value);e.save(),e.translate(t.x+t.textX,t.y+t.textY),e.rotate(i.degreesToRadians(h)),O.axis.ticks.text.fill&&(e.fillStyle=O.axis.ticks.text.fill),e.fillText(String(r),0,0),e.restore()})),void 0!==b){var q=0,B=0,W=0,z="center";"y"===r?(W=-90,q=S,"start"===P?(z="start",B=f):"middle"===P?(z="center",B=f/2):"end"===P&&(z="end")):(B=S,"start"===P?z="start":"middle"===P?(z="center",q=f/2):"end"===P&&(z="end",q=f)),e.translate(q,B),e.rotate(i.degreesToRadians(W)),e.font=(O.axis.legend.text.fontWeight?O.axis.legend.text.fontWeight+" ":"")+O.axis.legend.text.fontSize+"px "+O.axis.legend.text.fontFamily,O.axis.legend.text.fill&&(e.fillStyle=O.axis.legend.text.fill),e.textAlign=z,e.textBaseline="middle",e.fillText(b,0,0)}e.restore()};exports.Axes=b,exports.Axis=p,exports.AxisTick=g,exports.Grid=j,exports.GridLine=T,exports.GridLines=P,exports.axisPropType=h,exports.axisPropTypes=k,exports.positions=v,exports.renderAxesToCanvas=function(e,t){var i=t.xScale,n=t.yScale,r=t.width,a=t.height,o=t.top,s=t.right,l=t.bottom,c=t.left,f=t.theme,u={top:o,right:s,bottom:l,left:c};v.forEach((function(t){var o=u[t];if(!o)return null;var s="top"===t||"bottom"===t,l="top"===t||"left"===t?"before":"after",c=s?i:n,d=m(o.format,c);S(e,x({},o,{axis:s?"x":"y",x:"right"===t?r:0,y:"bottom"===t?a:0,scale:c,format:d,length:s?r:a,ticksPosition:l,theme:f}))}))},exports.renderAxisToCanvas=S,exports.renderGridLinesToCanvas=function(e,t){var i=t.width,n=t.height,r=t.scale,a=t.axis,o=t.values;y({width:i,height:n,scale:r,axis:a,values:o}).forEach((function(t){e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke()}))};
//# sourceMappingURL=nivo-axes.cjs.js.map
